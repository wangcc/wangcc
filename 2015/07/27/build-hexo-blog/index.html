<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="baidu-site-verification" content="8PSXUpZTlU" />
  
  <title>用Hexo搭建博客 | Eric Wang</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  
    <meta name="author" content="Eric Wang">
  
  
    <meta name="description" content="自从Github的访问越来越困难之后，我就在寻找博客的替代方案。有人一定会说”你可以翻墙啊”之类的，但是博客这东西，真心想有个顺畅的体验，偶尔懒得写教程，发博客的链接给别人，还得先教别人翻墙么？So, 辗转好多家，Farbox, Leanote 我都付费体验了，效果都真心不满意。
这个时候看到了一个heroicyang移植的一个叫做modernist的Hexo的Demo，觉得样式真心的赞


就下">
  
  <meta name="description" content="自从Github的访问越来越困难之后，我就在寻找博客的替代方案。有人一定会说”你可以翻墙啊”之类的，但是博客这东西，真心想有个顺畅的体验，偶尔懒得写教程，发博客的链接给别人，还得先教别人翻墙么？So, 辗转好多家，Farbox, Leanote 我都付费体验了，效果都真心不满意。
这个时候看到了一个heroicyang移植的一个叫做modernist的Hexo的Demo，觉得样式真心的赞


就下">
<meta property="og:type" content="article">
<meta property="og:title" content="用Hexo搭建博客">
<meta property="og:url" content="http://ykswang.coding.io/2015/07/27/build-hexo-blog/index.html">
<meta property="og:site_name" content="Eric Wang">
<meta property="og:description" content="自从Github的访问越来越困难之后，我就在寻找博客的替代方案。有人一定会说”你可以翻墙啊”之类的，但是博客这东西，真心想有个顺畅的体验，偶尔懒得写教程，发博客的链接给别人，还得先教别人翻墙么？So, 辗转好多家，Farbox, Leanote 我都付费体验了，效果都真心不满意。
这个时候看到了一个heroicyang移植的一个叫做modernist的Hexo的Demo，觉得样式真心的赞


就下">
<meta property="og:image" content="http://ykswang.coding.io/static/build-hexo-blog/QQ20150729-1@2x.png">
<meta property="og:image" content="http://ykswang.coding.io/static/build-hexo-blog/QQ20150729-6@2x.png">
<meta property="og:image" content="http://ykswang.coding.io/static/build-hexo-blog/QQ20150729-5@2x.png">
<meta property="og:updated_time" content="2015-07-29T08:40:35.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="用Hexo搭建博客">
<meta name="twitter:description" content="自从Github的访问越来越困难之后，我就在寻找博客的替代方案。有人一定会说”你可以翻墙啊”之类的，但是博客这东西，真心想有个顺畅的体验，偶尔懒得写教程，发博客的链接给别人，还得先教别人翻墙么？So, 辗转好多家，Farbox, Leanote 我都付费体验了，效果都真心不满意。
这个时候看到了一个heroicyang移植的一个叫做modernist的Hexo的Demo，觉得样式真心的赞


就下">
  
  
  <link rel="stylesheet" href="../../../../css/style.css" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
  <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?5a0577f5a3818fb3a31da17440373a0a";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>

</head>

<body>
  <div class="wrapper">
    <header id="header">
  <div class="title">
    <h1><a href="/">Eric Wang</a></h1>
    <p><a href="/">患中二病的测试开发攻城狮</a></p>
  </div>
  <nav class="nav">
    <ul>
      
        <li><a href="/">主页</a></li>
      
        <li><a href="/archives">存档</a></li>
      
        <li><a href="/atom.xml">订阅</a></li>
      
        <li><a href="/about">关于</a></li>
      
      
    </ul>
    <div class="clearfix"></div>
  </nav>
  <div class="clearfix"></div>
</header>
    <div class="content"><article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2015/07/27/build-hexo-blog/">
  <time datetime="2015-07-27T02:00:00.000Z">
    2015-07-27
  </time>
</a>
    
    
  
    <h1 class="title">用Hexo搭建博客</h1>
  

  </header>
  
  <div class="entry">
    
      <p>自从Github的访问越来越困难之后，我就在寻找博客的替代方案。有人一定会说”你可以翻墙啊”之类的，但是博客这东西，真心想有个顺畅的体验，偶尔懒得写教程，发博客的链接给别人，还得先教别人翻墙么？So, 辗转好多家，<a href="www.farbox.com">Farbox</a>, <a href="www.leanote.com">Leanote</a> 我都付费体验了，效果都真心不满意。</p>
<p>这个时候看到了一个heroicyang移植的一个叫做<code>modernist</code>的Hexo的<a href="http://modernist.heroicyang.com/" target="_blank" rel="external">Demo</a>，觉得样式真心的赞</p>
<img src="/static/build-hexo-blog/QQ20150729-1@2x.png">
<hr>
<p>就下了点功夫去查了下Hexo的资料:</p>
<blockquote><p><a href="https://hexo.io/zh-cn/" target="_blank" rel="external">Hexo</a>出自台湾大学生tommy351之手，是一个基于Node.js的静态博客程序，其编译上百篇文字只需要几秒。Hexo生成的静态网页可以直接放到GitHub Pages，BAE，SAE等平台上。</p>
</blockquote>
<p>静态博客啊，这不正好和Github Pages吻合的风格么，一直觉得这种东西既简洁又Geek，决定先在Mac上来一发看看效果</p>
<a id="more"></a>
<h2 id="环境准备">环境准备</h2><h4 id="NodeJS">NodeJS</h4><p>Hexo 是基于NodeJS的，所以需要先安装NodeJS</p>
<ol>
<li>去NodeJS的<a href="https://nodejs.org" target="_blank" rel="external">官网</a>下载安装包一路Next到底安装即可</li>
<li>安装完运行下<code>node -v</code>来验证下是否安装成功</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ node -v&#10;v0.12.7</span><br></pre></td></tr></table></figure>
<h4 id="Git">Git</h4><p>Hexo的插件，主题很多依赖Git，Mac上安装Git有两个途径</p>
<ol>
<li>你装了Xcode, 那么你开启Command Line Tools 即可</li>
<li>通过 Homebrew 安装： <code>brew install git</code></li>
</ol>
<h4 id="Cnpm">Cnpm</h4><p>在天朝，从NPM源在线安装库包是一件极其坑爹的事情，幸好我们还有<a href="http://npm.taobao.org" target="_blank" rel="external">淘宝源</a><br>我们可以安装CNMP命令来专门使用这个镜像<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure></p>
<p>当然，如果你不喜欢安装CNPM，那么遇到在线下载卡壳的时候，偶尔使用<code>--registry=</code>参数给NPM临时指定下镜像也是可以的</p>
<h4 id="Hexo">Hexo</h4><p>前两项都准备好了以后，我们可以通过npm命令安装Hexo了<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cnpm install hexo-cli -g</span><br></pre></td></tr></table></figure></p>
<hr>
<h2 id="搭建博客">搭建博客</h2><h4 id="初始化目录">初始化目录</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo init &#60;&#30446;&#24405;&#36335;&#24452;&#62;</span><br></pre></td></tr></table></figure>
<blockquote><p>你也可以 cd 到这个目录下然后运行 <code>hexo init</code></p>
</blockquote>
<h4 id="生成静态博客">生成静态博客</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<blockquote><p>generate 命令必须和前面的 init 命令为同一级的目录，运行成功后会在 public 目录下生成博客</p>
</blockquote>
<h4 id="本地运行">本地运行</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<blockquote><p>默认会在 <a href="http://0.0.0.0:4000" target="_blank" rel="external">http://0.0.0.0:4000</a> 开启一个服务器以供本地调试</p>
</blockquote>
<h4 id="发布到类似Github_Pages的Git服务下">发布到类似Github Pages的Git服务下</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<blockquote><p>部署的具体配置下文再仔细解释</p>
</blockquote>
<h4 id="DTrace报错排除">DTrace报错排除</h4><p>在运行 hexo 命令的时候，可能会遇到DTrace报错</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; [Error: Cannot find module &#39;./build/Release/DTraceProviderBindings&#39;] code: &#39;MODULE_NOT_FOUND&#39; &#125;&#10;&#123; [Error: Cannot find module &#39;./build/default/DTraceProviderBindings&#39;] code: &#39;MODULE_NOT_FOUND&#39; &#125;&#10;&#123; [Error: Cannot find module &#39;./build/Debug/DTraceProviderBindings&#39;] code: &#39;MODULE_NOT_FOUND&#39; &#125;</span><br></pre></td></tr></table></figure>
<p>如果你遇到了这种情况，说么你的环境不支持DTrace，重新用下面命令更新hexo包即可：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cnpm install hexo --no-optional --save</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="配置">配置</h2><p>默认初始化完的目录是没有配置文件的，我们可以通过命令加载一个模板<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ touch _config.yml</span><br></pre></td></tr></table></figure></p>
<p>生成的配置文件有很多属性字段，官网给出了很详细的<a href="https://hexo.io/zh-cn/docs/configuration.html" target="_blank" rel="external">配置说明</a></p>
<hr>
<h2 id="主题">主题</h2><p>添加主题的方法是把主题文件放到themes的一个目录下，在把<code>_config.yml</code>里的内容配置成目录的名字，即可启用，不同的主题可能还有自己的一些配置说明，一般都是通过Github的README来说明的</p>
<p>我这边选用的是前文提到的<code>modernist</code>主题<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git clone git://github.com/heroicyang/hexo-theme-modernist.git themes/modernist</span><br></pre></td></tr></table></figure></p>
<hr>
<h2 id="写作">写作</h2><p>接下来，我们要在网站中建立第一篇文章，推荐使用 new 指令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new [layout] &#60;title&#62;</span><br></pre></td></tr></table></figure></p>
<p>您可以在命令中指定文章的布局（layout），默认为 post，可以通过修改 _config.yml 中的 default_layout 参数来指定默认布局。</p>
<p>每篇文章都是一个markdown文件，在文件的开头，有一个称为 <code>Front-matter</code> 的部分来定义文章的一些属性， <code>Front-matter</code> 和正文之间用 <code>---</code>分割，大致是下面这个样子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#34;title&#34;: &#34;Hello World&#34;,&#10;&#34;date&#34;: &#34;2013/7/13 20:46:25&#34;&#10;---</span><br></pre></td></tr></table></figure></p>
<p>每个标签的意义，请参看<a href="https://hexo.io/zh-cn/docs/front-matter.html" target="_blank" rel="external">文档</a></p>
<hr>
<h2 id="评论">评论</h2><p>Hexo支持 <strong>多说</strong> 和 <strong>Disqus</strong></p>
<h4 id="多说">多说</h4><p>在 _config.yml 里增加：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">disqus_shortname: [&#22810;&#35828; ID]</span><br></pre></td></tr></table></figure></p>
<h4 id="Disqus">Disqus</h4><p>在 _config.yml 里增加：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">duoshuo_shortname: [Disqus ID]</span><br></pre></td></tr></table></figure></p>
<hr>
<h2 id="静态资源">静态资源</h2><p>从Hexo3开始，每篇文章的静态资源支持独立目录的管理，开启的方法：<br>在 _config.yml 里修改<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">post_asset_folder: true</span><br></pre></td></tr></table></figure></p>
<p>当你设置 post_asset_folder 参数后，在建立文件时，Hexo 会自动建立一个与文章同名的文件夹，您可以把与该文章相关的所有资源都放到那个文件夹，如此一来，你便可以更方便的使用资源。</p>
<p>Hexo 3.0 新增了几个插件，让你更方便的在文章内引用资源。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% asset_path slug %&#125;&#10;&#123;% asset_img slug [title] %&#125;&#10;&#123;% asset_link slug [title] %&#125;</span><br></pre></td></tr></table></figure></p>
<hr>
<h2 id="托管到_Coding-net">托管到 Coding.net</h2><p>最近正好在玩 Coding.net, 里面的演示功能支持外部访问，正好用来托管我的博客</p>
<h4 id="发布代码">发布代码</h4><p>首先创建一个项目，获取这个项目的git地址，例如 <a href="https://git.coding.net/xxx/xxx.git" target="_blank" rel="external">https://git.coding.net/xxx/xxx.git</a></p>
<p>然后我们在hexo的_config.yml里配置deploy<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">deploy:&#10;  type: git&#10;  repo: https://git.coding.net/xxx/xxx.git&#10;  branch: master</span><br></pre></td></tr></table></figure></p>
<p>这里使用到git的Deploy服务需要一个插件<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cnpm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure></p>
<p>然后我们运行deploy指令，按提示输入Coding.net的用户名密码，编译出的静态页面就发布到Coding.net中了</p>
<h4 id="开启演示">开启演示</h4><p>在Coding.net的项目的演示页面下，配置一个HTML的演示工程，并配置内存和二级域名<br><img src="/static/build-hexo-blog/QQ20150729-6@2x.png"></p>
<p>成功开启后如下：<br><img src="/static/build-hexo-blog/QQ20150729-5@2x.png"></p>

    
  </div>
  <footer>
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


<section id="comment">
  <h1 class="title">评论</h1>
  <div class="ds-thread" data-title="用Hexo搭建博客">
  </div>
</section>
</div>
  </div>
  <footer id="footer"><div class="copyright">
  
  &copy; 2015 <a href="/">Eric Wang</a>
  
</div>
<div class="theme-copyright">
  Theme by <a href="https://github.com/orderedlist" target="_blank">orderedlist</a>
   |
  Redesign by <a href="http://heroicyang.com/" target="_blank">Heroic Yang</a>
</div>
</footer>
  <script src="/js/jquery.min.js"></script>
<script src="/js/scale.fix.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<script type="text/javascript">
  var duoshuoQuery = { short_name: 'coode' };
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';
    ds.async = true;
    ds.src = 'http://static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script>



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
  (function($){
    $('.fancybox').fancybox();
  })(jQuery);
</script>


</body>
</html>